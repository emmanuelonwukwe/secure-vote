name: This CI/CD workflow file helps to auto merge every pull request to the master branch

on:
  pull_request:
    branches: ["master"]

jobs:
  merge:
    name: Merge on Success
    runs-on: ubuntu-latest

    steps:
      - name: Checkout the branch
        uses: actions/checkout@v2

      - name: Merge Pull Request
        env:
          GITHUB_TOKEN: ${{ secrets.CI_TOKEN }}
        run: |
          # Ensure the pull request is up to date with the base branch (main)
          git fetch origin master
          # Merge the pull request into master
          git checkout master
          git merge --no-ff ${{ github.event.pull_request.head.sha }}
          git push origin master
